<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tribble - The Enterprise Intelligence Platform | Where Every Workflow Learns</title>
    <link rel="icon" type="image/svg+xml" href="title-icon.svg">
    <!-- Preload critical resources -->
    <link rel="preload" href="./models/optimized/mega_factory.glb" as="fetch" crossorigin>
    <link rel="preload" href="./models/optimized/microchip_prototype.glb" as="fetch" crossorigin>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: #f8fafc;
            color: #00091A;
            overflow-x: hidden;
            height: 800vh;
        }
        
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 1;
        }
        
        .hud-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            pointer-events: none;
            z-index: 10;
        }
        
        /* HUD Frame Elements */
        .hud-frame {
            position: absolute;
            border: 2px solid #3263E9;
            opacity: 0.8;
        }
        
        .hud-corner {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid #3263E9;
        }
        
        .hud-corner.top-left {
            top: 40px;
            left: 40px;
            border-right: none;
            border-bottom: none;
        }
        
        .hud-corner.top-right {
            top: 40px;
            right: 40px;
            border-left: none;
            border-bottom: none;
        }
        
        .hud-corner.bottom-left {
            bottom: 40px;
            left: 40px;
            border-right: none;
            border-top: none;
        }
        
        .hud-corner.bottom-right {
            bottom: 40px;
            right: 40px;
            border-left: none;
            border-top: none;
        }
        
        /* Scanning lines */
        .scan-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #5B7FEA, transparent);
            opacity: 0;
        }
        
        /* Data readouts */
        .data-readout {
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #3263E9;
            padding: 8px 12px;
            font-size: 11px;
            font-family: 'Monaco', 'Courier New', monospace;
            color: #3263E9;
            opacity: 0;
            backdrop-filter: blur(10px);
        }
        
        .data-label {
            color: #6B7280;
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .data-value {
            font-size: 14px;
            font-weight: bold;
            color: #3263E9;
            margin-top: 2px;
        }
        
        /* Targeting reticle */
        .targeting-reticle {
            position: absolute;
            width: 100px;
            height: 100px;
            opacity: 0;
        }
        
        .reticle-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 2px solid #5B7FEA;
            border-radius: 50%;
        }
        
        .reticle-cross {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .reticle-line {
            position: absolute;
            background: #5B7FEA;
        }
        
        .reticle-line.horizontal {
            width: 120px;
            height: 1px;
            left: -10px;
        }
        
        .reticle-line.vertical {
            width: 1px;
            height: 120px;
            top: -10px;
        }
        
        /* Tech grid overlay */
        .tech-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(50, 99, 233, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(50, 99, 233, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
            opacity: 0.5;
        }
        
        /* Analysis info panel */
        .analysis-panel {
            position: absolute;
            top: 50%;
            right: 60px;
            transform: translateY(-50%);
            width: 250px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #3263E9;
            padding: 20px;
            backdrop-filter: blur(20px);
            opacity: 0;
        }
        
        .analysis-title {
            font-size: 12px;
            font-weight: 700;
            color: #3263E9;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
        }
        
        .analysis-item {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(50, 99, 233, 0.2);
        }
        
        .analysis-item:last-child {
            border-bottom: none;
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(50, 99, 233, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 5px;
        }
        
        .progress-fill {
            height: 100%;
            background: #3263E9;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Loading screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s ease-out;
        }
        
        .loading-text {
            margin-top: 20px;
            color: #3263E9;
            font-size: 14px;
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        /* Hero content overlay - split layout */
        .hero-top {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 100;
            opacity: 1;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }
        
        .hero-buttons {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 100;
            opacity: 1;
            transition: opacity 0.5s ease;
            pointer-events: auto;
        }
        
        .hero-top.hidden, .hero-buttons.hidden {
            opacity: 0;
        }
        
        .hero-logo {
            font-size: 4rem;
            font-weight: 900;
            color: #3263E9;
            margin-bottom: 1rem;
            letter-spacing: -2px;
        }
        
        .hero-tagline {
            font-size: 1.8rem;
            color: #3263E9;
            margin-bottom: 0.5rem;
            font-weight: 600;
            background: linear-gradient(135deg, #3263E9, #5B7FEA);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
            color: #6B7280;
            margin-bottom: 0;
            font-weight: 300;
        }
        
        .hero-cta {
            display: inline-block;
            background: #3263E9;
            color: white;
            padding: 1rem 2.5rem;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            pointer-events: auto;
            margin: 0 0.5rem;
        }
        
        .hero-cta:hover {
            background: #2B57D8;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(50, 99, 233, 0.3);
        }
        
        .hero-cta.secondary {
            background: transparent;
            border: 2px solid #3263E9;
            color: #3263E9;
        }
        
        .hero-cta.secondary:hover {
            background: #3263E9;
            color: white;
        }
        
        /* Platform features */
        .features-strip {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 3rem;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }
        
        .features-strip.visible {
            opacity: 1;
        }
        
        .feature-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 1.5rem;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(50, 99, 233, 0.2);
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .feature-title {
            font-size: 1rem;
            font-weight: 700;
            color: #3263E9;
            margin-bottom: 0.3rem;
        }
        
        .feature-desc {
            font-size: 0.875rem;
            color: #6B7280;
        }
        
        /* Scroll prompt */
        .scroll-prompt {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 100;
            opacity: 1;
            transition: opacity 0.5s ease;
        }
        
        /* View Details Button - Centered and Prominent */
        .view-details-btn {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #3263E9, #5B7FEA);
            color: white;
            padding: 20px 48px;
            border-radius: 60px;
            font-weight: 700;
            font-size: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            z-index: 150;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 20px 60px rgba(50, 99, 233, 0.4),
                        0 0 100px rgba(50, 99, 233, 0.2);
            display: none;
            backdrop-filter: blur(10px);
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .view-details-btn.visible {
            display: block;
            opacity: 1;
            animation: pulseButton 2s ease-in-out infinite,
                       floatButton 3s ease-in-out infinite;
        }
        
        .view-details-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 120%;
            background: linear-gradient(135deg, #3263E9, #5B7FEA);
            border-radius: 60px;
            opacity: 0.3;
            filter: blur(20px);
            z-index: -1;
            animation: glowPulse 2s ease-in-out infinite;
        }
        
        @keyframes glowPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.5; }
        }
        
        .view-details-btn:hover {
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 0 25px 80px rgba(50, 99, 233, 0.6),
                        0 0 120px rgba(91, 127, 234, 0.4);
            background: linear-gradient(135deg, #3263E9, #5B7FEA);
        }
        
        @keyframes pulseButton {
            0%, 100% { 
                box-shadow: 0 20px 60px rgba(50, 99, 233, 0.4),
                            0 0 100px rgba(50, 99, 233, 0.2);
            }
            50% { 
                box-shadow: 0 20px 80px rgba(50, 99, 233, 0.6),
                            0 0 150px rgba(50, 99, 233, 0.3);
            }
        }
        
        @keyframes floatButton {
            0%, 100% { transform: translate(-50%, -50%) translateY(0px); }
            50% { transform: translate(-50%, -50%) translateY(-10px); }
        }
        
        .scroll-prompt.hidden {
            opacity: 0;
        }
        
        .scroll-text {
            color: #6B7280;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .scroll-arrow {
            width: 30px;
            height: 30px;
            border-right: 2px solid #3263E9;
            border-bottom: 2px solid #3263E9;
            transform: rotate(45deg);
            margin: 0 auto;
            animation: scrollBounce 2s ease-in-out infinite;
        }
        
        @keyframes scrollBounce {
            0%, 100% { transform: rotate(45deg) translateY(0); }
            50% { transform: rotate(45deg) translateY(5px); }
        }
        
        /* Scene title */
        .scene-info {
            position: absolute;
            top: 60px;
            left: 60px;
            opacity: 0;
        }
        
        .scene-title {
            font-size: 24px;
            font-weight: 800;
            color: #3263E9;
            letter-spacing: -0.5px;
            margin-bottom: 5px;
        }
        
        .scene-subtitle {
            font-size: 14px;
            color: #6B7280;
            font-weight: 500;
        }
        
        /* Floating data points */
        .data-point {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #5B7FEA;
            border-radius: 50%;
            opacity: 0;
        }
        
        .data-point::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            border: 1px solid #5B7FEA;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }
        
        /* Additional HUD elements */
        
        .velocity-display {
            position: absolute;
            left: 60px;
            bottom: 60px;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #3263E9;
            padding: 10px 15px;
            font-family: 'Monaco', 'Courier New', monospace;
            opacity: 0;
            backdrop-filter: blur(10px);
        }
        
        .velocity-label {
            color: #6B7280;
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .velocity-value {
            font-size: 18px;
            font-weight: bold;
            color: #3263E9;
            margin-top: 3px;
        }
        
        .connection-lines {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0;
        }
        
        .connection-line {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, #5B7FEA, transparent);
            transform-origin: left center;
        }
        
        .tracking-brackets {
            position: absolute;
            opacity: 0;
        }
        
        .bracket {
            position: absolute;
            width: 30px;
            height: 30px;
            border: 2px solid #5B7FEA;
        }
        
        .bracket.tl { top: 0; left: 0; border-right: none; border-bottom: none; }
        .bracket.tr { top: 0; right: 0; border-left: none; border-bottom: none; }
        .bracket.bl { bottom: 0; left: 0; border-right: none; border-top: none; }
        .bracket.br { bottom: 0; right: 0; border-left: none; border-top: none; }
        
        
        /* Radar sweep */
        .radar-container {
            position: absolute;
            top: 60px;
            right: 60px;
            width: 150px;
            height: 150px;
            opacity: 0;
        }
        
        .radar-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 2px solid rgba(50, 99, 233, 0.3);
            border-radius: 50%;
            background: radial-gradient(circle, rgba(50, 99, 233, 0.1) 0%, transparent 70%);
        }
        
        .radar-sweep {
            position: absolute;
            width: 100%;
            height: 100%;
            background: conic-gradient(from 0deg, transparent, rgba(91, 127, 234, 0.6), transparent 30deg);
            border-radius: 50%;
            animation: radarSweep 3s linear infinite;
        }
        
        @keyframes radarSweep {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .radar-dot {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #5B7FEA;
            border-radius: 50%;
            box-shadow: 0 0 10px #5B7FEA;
            animation: radarPulse 2s ease-in-out infinite;
        }
        
        @keyframes radarPulse {
            0%, 100% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }
        
        
        /* Waveform analyzer */
        .waveform {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 60px;
            opacity: 0;
            display: flex;
            align-items: center;
            gap: 2px;
        }
        
        .wave-bar {
            flex: 1;
            background: linear-gradient(to top, #3263E9, #5B7FEA);
            height: 20%;
            animation: waveform 1s ease-in-out infinite;
        }
        
        @keyframes waveform {
            0%, 100% { height: 20%; }
            50% { height: var(--wave-height, 80%); }
        }
        
        /* Crosshair overlay */
        .crosshair-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            opacity: 0;
            pointer-events: none;
        }
        
        .crosshair-line {
            position: absolute;
            background: rgba(91, 127, 234, 0.5);
        }
        
        .crosshair-h1 { top: 30%; left: 0; width: 30%; height: 1px; }
        .crosshair-h2 { top: 30%; right: 0; width: 30%; height: 1px; }
        .crosshair-h3 { bottom: 30%; left: 0; width: 30%; height: 1px; }
        .crosshair-h4 { bottom: 30%; right: 0; width: 30%; height: 1px; }
        .crosshair-v1 { left: 30%; top: 0; height: 30%; width: 1px; }
        .crosshair-v2 { left: 30%; bottom: 0; height: 30%; width: 1px; }
        .crosshair-v3 { right: 30%; top: 0; height: 30%; width: 1px; }
        .crosshair-v4 { right: 30%; bottom: 0; height: 30%; width: 1px; }
        
        .crosshair-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            border: 2px solid #5B7FEA;
            border-radius: 50%;
        }
        
        /* Particle field */
        .particle-field {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0;
        }
        
        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #5B7FEA;
            border-radius: 50%;
            animation: particleDrift 15s linear infinite;
        }
        
        @keyframes particleDrift {
            from { transform: translate(0, 0); }
            to { transform: translate(var(--drift-x), var(--drift-y)); }
        }
        
        /* Content Overlay Sections */
        .content-overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 1400px;
            height: 80vh;
            display: none;
            z-index: 200;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        
        .content-overlay.active {
            display: block !important;
            opacity: 1 !important;
            pointer-events: auto;
        }
        
        .content-container {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 60px;
            height: 100%;
            align-items: center;
        }
        
        .content-left {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(50, 99, 233, 0.3);
            border-radius: 20px;
            padding: 40px;
            height: fit-content;
        }
        
        .content-badge {
            display: inline-block;
            background: linear-gradient(135deg, #3263E9, #5B7FEA);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }
        
        .content-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: #3263E9;
            margin-bottom: 20px;
            line-height: 1.1;
        }
        
        .content-subtitle {
            font-size: 1.25rem;
            color: #6B7280;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .content-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-item {
            padding: 15px;
            background: rgba(50, 99, 233, 0.05);
            border-radius: 12px;
            border-left: 4px solid #3263E9;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #3263E9;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6B7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .content-cta {
            background: linear-gradient(135deg, #3263E9, #5B7FEA);
            color: white;
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-size: 16px;
        }
        
        .content-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(50, 99, 233, 0.4);
        }
        
        .content-right {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .use-case-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .use-case-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(50, 99, 233, 0.2);
            border-radius: 16px;
            padding: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .use-case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(50, 99, 233, 0.2);
            border-color: #3263E9;
        }
        
        .use-case-icon {
            font-size: 32px;
            margin-bottom: 15px;
        }
        
        .use-case-title {
            font-size: 18px;
            font-weight: 700;
            color: #3263E9;
            margin-bottom: 10px;
        }
        
        .use-case-desc {
            font-size: 14px;
            color: #6B7280;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .use-case-metric {
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, #3263E9, #5B7FEA);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .close-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #3263E9;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .close-overlay:hover {
            background: #3263E9;
            color: white;
            transform: rotate(90deg);
        }
        
        .close-overlay::before {
            content: '×';
            font-size: 24px;
            font-weight: 300;
            color: #3263E9;
        }
        
        .close-overlay:hover::before {
            color: white;
        }
    </style>
    
    <!-- Technical HUD aesthetic overrides: angular, blue/white, no emojis -->
    <style>
        :root {
            --tribble-blue: #3263E9;
            --tribble-blue-2: #5B7FEA;
            --panel-bg: rgba(255, 255, 255, 0.94);
            --notch: 12px;
            --thin: 1.5px;
        }

        /* Angular panel primitive */
        .panel-angled {
            background: var(--panel-bg);
            border: 2px solid var(--tribble-blue);
            border-radius: 0;
            clip-path: polygon(var(--notch) 0, 100% 0, 100% calc(100% - var(--notch)), calc(100% - var(--notch)) 100%, 0 100%, 0 var(--notch));
            position: relative;
            backdrop-filter: blur(12px);
        }
        .panel-angled::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--tribble-blue), rgba(91,127,234,0.4), transparent 70%);
        }
        .panel-angled::after {
            content: '';
            position: absolute;
            right: 0;
            bottom: 0;
            width: 22%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(50,99,233,0.6));
        }

        /* Apply angular panels to existing UI blocks */
        .feature-item,
        .use-case-card,
        .content-left,
        .analysis-panel,
        .data-readout,
        .velocity-display { 
            border-radius: 0 !important; 
        }
        .feature-item,
        .use-case-card,
        .content-left,
        .analysis-panel { 
            /* upgrade to angular panel */
            background: var(--panel-bg) !important;
            border: 2px solid var(--tribble-blue) !important;
            clip-path: polygon(var(--notch) 0, 100% 0, 100% calc(100% - var(--notch)), calc(100% - var(--notch)) 100%, 0 100%, 0 var(--notch));
            position: relative;
        }
        .feature-item::before,
        .use-case-card::before,
        .content-left::before,
        .analysis-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--tribble-blue), rgba(91,127,234,0.35), transparent 70%);
        }

        /* Badge: remove pill, add bracketed label */
        .content-badge {
            background: transparent !important;
            color: var(--tribble-blue) !important;
            border: 1.5px solid var(--tribble-blue) !important;
            border-radius: 0 !important;
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
            letter-spacing: 1.2px;
        }
        .content-badge::before,
        .content-badge::after {
            content: '';
            display: inline-block;
            width: 10px; height: 10px;
            border-top: var(--thin) solid var(--tribble-blue);
            border-left: var(--thin) solid var(--tribble-blue);
            margin: 0 10px -2px 0;
            transform: rotate(45deg);
        }
        .content-badge::after {
            border-left: 0; border-top: 0;
            border-right: var(--thin) solid var(--tribble-blue);
            border-bottom: var(--thin) solid var(--tribble-blue);
            margin: 0 0 -2px 10px;
        }

        /* Buttons: remove rounded, add angled silhouette */
        .hero-cta,
        .hero-cta.secondary,
        .content-cta,
        .view-details-btn {
            border-radius: 0 !important;
            clip-path: polygon(12px 0, 100% 0, 100% calc(100% - 12px), calc(100% - 12px) 100%, 0 100%, 0 12px);
            letter-spacing: 0.08em;
        }
        .hero-cta,
        .content-cta {
            background: linear-gradient(135deg, var(--tribble-blue), var(--tribble-blue-2)) !important;
            border: 2px solid rgba(255,255,255,0.0) !important;
            box-shadow: none !important;
        }
        .hero-cta.secondary {
            background: transparent !important;
            border: 2px solid var(--tribble-blue) !important;
            color: var(--tribble-blue) !important;
        }
        .view-details-btn {
            box-shadow: none !important;
            animation: none !important;
            border: 2px solid var(--tribble-blue) !important;
            background: rgba(255,255,255,0.92) !important;
            color: var(--tribble-blue) !important;
        }

        /* Close control: square, cut-corner, technical */
        .close-overlay {
            border-radius: 0 !important;
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
        }
        .close-overlay::before { color: var(--tribble-blue) !important; }
        .close-overlay:hover { transform: none !important; }

        /* Replace emoji icons with angular glyphs via CSS */
        .feature-icon,
        .use-case-icon {
            width: 32px; height: 32px;
            margin: 0 auto 10px auto;
            position: relative;
            font-size: 0 !important;
        }
        .feature-icon::before, .feature-icon::after,
        .use-case-icon::before, .use-case-icon::after { content: none !important; }
        .feature-icon svg, .use-case-icon svg { width: 32px; height: 32px; color: var(--tribble-blue); display: block; }

        /* Titles: more tech-forward spacing */
        .content-title { letter-spacing: 0.5px; }
        .use-case-title, .feature-title { letter-spacing: 0.6px; }

        /* Remove heavy rounded corners and glows globally in overlays */
        .content-left,
        .use-case-card,
        .feature-item { box-shadow: none !important; }

        /* Dense, technical stat blocks */
        .stat-item {
            border-radius: 0 !important;
            border-left: 0 !important;
            border: 1px solid rgba(50,99,233,0.35) !important;
            background: rgba(50,99,233,0.04) !important;
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
        }

        /* Scroll arrow sharper */
        .scroll-arrow { border-radius: 0 !important; }

        /* HUD rulers */
        .hud-ruler { position: absolute; pointer-events: none; opacity: 0.25; z-index: 5; }
        .hud-ruler-top { top: 0; left: 0; right: 0; height: 12px; background: repeating-linear-gradient(90deg, rgba(50,99,233,0.6) 0, rgba(50,99,233,0.6) 2px, transparent 2px, transparent 10px); }
        .hud-ruler-left { top: 0; left: 0; bottom: 0; width: 12px; background: repeating-linear-gradient(180deg, rgba(50,99,233,0.6) 0, rgba(50,99,233,0.6) 2px, transparent 2px, transparent 10px); }

        /* Focus visibility for accessibility */
        a:focus-visible, button:focus-visible { outline: 2px solid var(--tribble-blue); outline-offset: 2px; }

        /* Progress bars: sharper corners */
        .progress-bar { border-radius: 0 !important; }

        /* Data readouts look like HUD tiles */
        .data-readout { background: rgba(255,255,255,0.92) !important; }
    </style>
    
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/"
        }
    }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
</head>
<body>
    <!-- Inline SVG sprite for HUD glyphs -->
    <svg aria-hidden="true" focusable="false" style="position:absolute; width:0; height:0; overflow:hidden">
        <defs>
            <symbol id="icon-hex" viewBox="0 0 100 100">
                <polygon points="25,5 75,5 95,50 75,95 25,95 5,50" fill="none" stroke="currentColor" stroke-width="6"/>
            </symbol>
            <symbol id="icon-node" viewBox="0 0 100 100">
                <circle cx="20" cy="50" r="10" fill="currentColor"/>
                <circle cx="80" cy="30" r="10" fill="currentColor"/>
                <circle cx="70" cy="80" r="10" fill="currentColor"/>
                <path d="M28 47 L70 33 M28 53 L62 76" stroke="currentColor" stroke-width="6" fill="none"/>
            </symbol>
            <symbol id="icon-target" viewBox="0 0 100 100">
                <polygon points="35,5 65,5 95,35 95,65 65,95 35,95 5,65 5,35" fill="none" stroke="currentColor" stroke-width="6"/>
                <line x1="50" y1="15" x2="50" y2="85" stroke="currentColor" stroke-width="6"/>
                <line x1="15" y1="50" x2="85" y2="50" stroke="currentColor" stroke-width="6"/>
            </symbol>
            <symbol id="icon-bolt" viewBox="0 0 100 100">
                <polygon points="45,5 20,55 45,55 35,95 80,35 55,35 70,5" fill="currentColor"/>
            </symbol>
            <symbol id="icon-shield" viewBox="0 0 100 100">
                <path d="M50 8 L85 20 V50 C85 70 70 85 50 92 C30 85 15 70 15 50 V20 Z" fill="none" stroke="currentColor" stroke-width="6"/>
            </symbol>
            <symbol id="icon-gear" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="18" fill="none" stroke="currentColor" stroke-width="6"/>
                <g fill="none" stroke="currentColor" stroke-width="6">
                    <path d="M50 5 V20"/>
                    <path d="M50 80 V95"/>
                    <path d="M5 50 H20"/>
                    <path d="M80 50 H95"/>
                    <path d="M18 18 L28 28"/>
                    <path d="M72 72 L82 82"/>
                    <path d="M82 18 L72 28"/>
                    <path d="M28 72 L18 82"/>
                </g>
            </symbol>
            <symbol id="icon-chart" viewBox="0 0 100 100">
                <rect x="15" y="60" width="12" height="25" fill="currentColor"/>
                <rect x="40" y="45" width="12" height="40" fill="currentColor"/>
                <rect x="65" y="25" width="12" height="60" fill="currentColor"/>
            </symbol>
            <symbol id="icon-doc" viewBox="0 0 100 100">
                <path d="M20 10 H60 L80 30 V90 H20 Z" fill="none" stroke="currentColor" stroke-width="6"/>
                <path d="M60 10 V30 H80" fill="none" stroke="currentColor" stroke-width="6"/>
                <path d="M30 45 H70 M30 60 H70 M30 75 H55" stroke="currentColor" stroke-width="6"/>
            </symbol>
        </defs>
    </svg>
    <div class="loading-screen" id="loading-screen">
        <div class="loading-text">INITIALIZING AGENT FACTORY</div>
    </div>
    
    <!-- Hero content split into top and center -->
    <div class="hero-top" id="hero-top">
        <img src="logo-static.svg" alt="Tribble" class="hero-logo-img" style="width: 240px; height: auto; margin-bottom: 20px;">
        <p class="hero-tagline">The Enterprise Intelligence Platform</p>
        <p class="hero-subtitle">Where Every Workflow Learns</p>
    </div>
    
    <div class="hero-buttons" id="hero-buttons">
        <a href="#" class="hero-cta">See Tribble in Action</a>
        <a href="#" class="hero-cta secondary">Book Demo</a>
    </div>
    
    <!-- Features strip -->
    <div class="features-strip" id="features-strip">
        <div class="feature-item">
            <div class="feature-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-node"></use></svg></div>
            <div class="feature-title">Capture Intelligence</div>
            <div class="feature-desc">Learn from every interaction</div>
        </div>
        <div class="feature-item">
            <div class="feature-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-bolt"></use></svg></div>
            <div class="feature-title">Amplify Intelligence</div>
            <div class="feature-desc">Scale expertise instantly</div>
        </div>
        <div class="feature-item">
            <div class="feature-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-gear"></use></svg></div>
            <div class="feature-title">Automate Intelligence</div>
            <div class="feature-desc">Self-executing workflows</div>
        </div>
    </div>
    
    <!-- Scroll prompt -->
    <div class="scroll-prompt" id="scroll-prompt">
        <div class="scroll-text">Explore the Factory</div>
        <div class="scroll-arrow"></div>
    </div>
    
    <div class="hud-overlay">
        <div class="tech-grid"></div>
        <!-- HUD rulers / tick marks -->
        <div class="hud-ruler hud-ruler-top"></div>
        <div class="hud-ruler hud-ruler-left"></div>
        
        <!-- HUD Corners -->
        <div class="hud-corner top-left"></div>
        <div class="hud-corner top-right"></div>
        <div class="hud-corner bottom-left"></div>
        <div class="hud-corner bottom-right"></div>
        
        <!-- Scanning lines -->
        <div class="scan-line" id="scan1" style="top: 20%"></div>
        <div class="scan-line" id="scan2" style="top: 50%"></div>
        <div class="scan-line" id="scan3" style="top: 80%"></div>
        
        <!-- Scene info -->
        <div class="scene-info" id="scene-info">
            <h1 class="scene-title" id="scene-title">FACTORY OVERVIEW</h1>
            <p class="scene-subtitle" id="scene-subtitle">Complete System Analysis</p>
        </div>
        
        <!-- Data readouts -->
        <div class="data-readout" id="readout1" style="top: 150px; left: 60px;">
            <div class="data-label">ACTIVE AGENTS</div>
            <div class="data-value" id="cores-value">0</div>
        </div>
        
        <div class="data-readout" id="readout2" style="top: 220px; left: 60px;">
            <div class="data-label">WORKFLOW EFFICIENCY</div>
            <div class="data-value" id="density-value">0.00%</div>
        </div>
        
        <div class="data-readout" id="readout3" style="bottom: 150px; left: 60px;">
            <div class="data-label">DEPLOYMENTS/SEC</div>
            <div class="data-value" id="production-value">0</div>
        </div>
        
        <!-- Targeting reticle -->
        <div class="targeting-reticle" id="reticle">
            <div class="reticle-circle"></div>
            <div class="reticle-cross">
                <div class="reticle-line horizontal"></div>
                <div class="reticle-line vertical"></div>
            </div>
        </div>
        
        <!-- Analysis panel -->
        <div class="analysis-panel" id="analysis-panel">
            <div class="analysis-title">SYSTEM ANALYSIS</div>
            <div class="analysis-item">
                <div class="data-label">AGENT RELIABILITY</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="integrity-progress"></div>
                </div>
            </div>
            <div class="analysis-item">
                <div class="data-label">API RESPONSE TIME</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="efficiency-progress"></div>
                </div>
            </div>
            <div class="analysis-item">
                <div class="data-label">MODEL ACCURACY</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="sync-progress"></div>
                </div>
            </div>
            <div class="analysis-item">
                <div class="data-label">SYSTEM UPTIME</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="thermal-progress"></div>
                </div>
            </div>
        </div>
        
        <!-- Floating data points -->
        <div class="data-point" id="point1"></div>
        <div class="data-point" id="point2"></div>
        <div class="data-point" id="point3"></div>
        <div class="data-point" id="point4"></div>
        <div class="data-point" id="point5"></div>
        
        <!-- Additional HUD elements -->
        
        <div class="velocity-display" id="velocity-display">
            <div class="velocity-label">INTEGRATION SPEED</div>
            <div class="velocity-value" id="velocity-value">0.00</div>
        </div>
        
        <div class="connection-lines" id="connection-lines">
            <div class="connection-line" id="line1" style="top: 25%; width: 200px; left: 10%;"></div>
            <div class="connection-line" id="line2" style="top: 50%; width: 150px; right: 15%; transform: rotate(-30deg);"></div>
            <div class="connection-line" id="line3" style="bottom: 30%; width: 180px; left: 20%; transform: rotate(20deg);"></div>
        </div>
        
        <div class="tracking-brackets" id="tracking-brackets" style="top: 50%; left: 50%; transform: translate(-50%, -50%); width: 200px; height: 150px;">
            <div class="bracket tl"></div>
            <div class="bracket tr"></div>
            <div class="bracket bl"></div>
            <div class="bracket br"></div>
        </div>
        
        <!-- Matrix rain effect -->
        
        <!-- Radar display -->
        <div class="radar-container" id="radar">
            <div class="radar-circle"></div>
            <div class="radar-circle" style="transform: scale(0.66);"></div>
            <div class="radar-circle" style="transform: scale(0.33);"></div>
            <div class="radar-sweep"></div>
            <div class="radar-dot" style="top: 30%; left: 60%;"></div>
            <div class="radar-dot" style="top: 70%; left: 40%;"></div>
            <div class="radar-dot" style="top: 50%; left: 20%;"></div>
        </div>
        
        
        <!-- Waveform analyzer -->
        <div class="waveform" id="waveform"></div>
        
        <!-- Crosshair overlay -->
        <div class="crosshair-overlay" id="crosshair">
            <div class="crosshair-line crosshair-h1"></div>
            <div class="crosshair-line crosshair-h2"></div>
            <div class="crosshair-line crosshair-h3"></div>
            <div class="crosshair-line crosshair-h4"></div>
            <div class="crosshair-line crosshair-v1"></div>
            <div class="crosshair-line crosshair-v2"></div>
            <div class="crosshair-line crosshair-v3"></div>
            <div class="crosshair-line crosshair-v4"></div>
            <div class="crosshair-center"></div>
        </div>
        
        <!-- Particle field -->
        <div class="particle-field" id="particle-field"></div>
    </div>
    
    <div id="canvas-container"></div>
    
    <!-- View Details Button - Centered -->
    <button class="view-details-btn" id="view-details-btn" onclick="showCurrentOverlay()">Explore Details →</button>
    
    <!-- Content Overlay Sections -->
    <div class="content-overlay" id="content-overlay-0">
        <div class="close-overlay" onclick="closeContentOverlay(0)"></div>
        <div class="content-container">
            <div class="content-left">
                <span class="content-badge">Enterprise Intelligence</span>
                <h2 class="content-title">Transform Your Organization Into A Learning System</h2>
                <p class="content-subtitle">Tribble is the Enterprise Intelligence Platform that captures, amplifies, and automates your organization's collective expertise—making every team member operate at peak performance.</p>
                <div class="content-stats">
                    <div class="stat-item">
                        <div class="stat-value">99%</div>
                        <div class="stat-label">Customer Satisfaction</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">125K+</div>
                        <div class="stat-label">Agent Interactions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">1,275</div>
                        <div class="stat-label">Hours Saved Monthly</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">SOC 2</div>
                        <div class="stat-label">Type II Certified</div>
                    </div>
                </div>
                <button class="content-cta">Schedule Your Demo</button>
            </div>
            <div class="content-right">
                <div class="use-case-grid">
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-doc"></use></svg></div>
                        <h3 class="use-case-title">Sales Intelligence</h3>
                        <p class="use-case-desc">Generate expert RFP responses, automate proposals, and scale your top performers' strategies.</p>
                        <div class="use-case-metric">800 hrs/month saved</div>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-shield"></use></svg></div>
                        <h3 class="use-case-title">Security & Compliance</h3>
                        <p class="use-case-desc">Automate security questionnaires and compliance documentation with 100% accuracy.</p>
                        <div class="use-case-metric">85% faster responses</div>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-target"></use></svg></div>
                        <h3 class="use-case-title">Enablement & Training</h3>
                        <p class="use-case-desc">Deliver personalized coaching based on real performance gaps identified by AI.</p>
                        <div class="use-case-metric">5,600 questions/month</div>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-chart"></use></svg></div>
                        <h3 class="use-case-title">Product Intelligence</h3>
                        <p class="use-case-desc">Auto-generate documentation and identify knowledge gaps across your product.</p>
                        <div class="use-case-metric">50% efficiency gain</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scene 1: Collective Memory -->
    <div class="content-overlay" id="content-overlay-1">
        <div class="close-overlay" onclick="closeContentOverlay(1)"></div>
        <div class="content-container">
            <div class="content-left">
                <span class="content-badge">Collective Memory</span>
                <h2 class="content-title">Your Organization's Living Knowledge Graph</h2>
                <p class="content-subtitle">Tribble connects every system, document, and conversation into a unified intelligence layer. No more silos—just instant access to your organization's complete knowledge.</p>
                <div class="content-stats">
                    <div class="stat-item">
                        <div class="stat-value">200+</div>
                        <div class="stat-label">Native Integrations</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">Real-time</div>
                        <div class="stat-label">Knowledge Sync</div>
                    </div>
                </div>
                <button class="content-cta">Explore Integrations</button>
            </div>
            <div class="content-right">
                <div class="use-case-grid">
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-node"></use></svg></div>
                        <h3 class="use-case-title">Salesforce + Slack</h3>
                        <p class="use-case-desc">Automatically sync deal context and update CRM from Slack conversations.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-doc"></use></svg></div>
                        <h3 class="use-case-title">Document Intelligence</h3>
                        <p class="use-case-desc">Extract insights from Google Drive, SharePoint, and Confluence automatically.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-target"></use></svg></div>
                        <h3 class="use-case-title">Zendesk Integration</h3>
                        <p class="use-case-desc">Route support tickets to experts based on historical resolution patterns.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-node"></use></svg></div>
                        <h3 class="use-case-title">Box Integration</h3>
                        <p class="use-case-desc">Unlock unstructured data to create comprehensive agent interactions.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scene 2: Distributed Thinking -->
    <div class="content-overlay" id="content-overlay-2">
        <div class="close-overlay" onclick="closeContentOverlay(2)"></div>
        <div class="content-container">
            <div class="content-left">
                <span class="content-badge">Multi-Agent Orchestration</span>
                <h2 class="content-title">Thousands of Agents Working As One</h2>
                <p class="content-subtitle">Deploy specialized AI agents that collaborate to complete complex workflows. Each agent brings unique expertise, working together to solve problems no single agent could handle alone.</p>
                <div class="content-stats">
                    <div class="stat-item">
                        <div class="stat-value">Parallel</div>
                        <div class="stat-label">Agent Execution</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">0ms</div>
                        <div class="stat-label">Response Latency</div>
                    </div>
                </div>
                <button class="content-cta">See Agent Architecture</button>
            </div>
            <div class="content-right">
                <div class="use-case-grid">
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-gear"></use></svg></div>
                        <h3 class="use-case-title">RFP Response Agent</h3>
                        <p class="use-case-desc">Analyzes requirements, pulls from knowledge base, and generates expert responses.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-target"></use></svg></div>
                        <h3 class="use-case-title">Research Agent</h3>
                        <p class="use-case-desc">Gathers competitive intelligence and market insights for strategic decisions.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-target"></use></svg></div>
                        <h3 class="use-case-title">Coaching Agent</h3>
                        <p class="use-case-desc">Analyzes call recordings, identifies gaps, and delivers personalized training.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-chart"></use></svg></div>
                        <h3 class="use-case-title">Analytics Agent</h3>
                        <p class="use-case-desc">Monitors performance metrics and suggests optimization opportunities.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scene 3: Autonomous Action -->
    <div class="content-overlay" id="content-overlay-3">
        <div class="close-overlay" onclick="closeContentOverlay(3)"></div>
        <div class="content-container">
            <div class="content-left">
                <span class="content-badge">Event-Driven Intelligence</span>
                <h2 class="content-title">Workflows That Think & Act</h2>
                <p class="content-subtitle">Tribble doesn't wait for commands—it proactively identifies opportunities, executes workflows, and learns from every interaction to improve future performance.</p>
                <div class="content-stats">
                    <div class="stat-item">
                        <div class="stat-value">24/7</div>
                        <div class="stat-label">Active Monitoring</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">Auto</div>
                        <div class="stat-label">Workflow Triggers</div>
                    </div>
                </div>
                <button class="content-cta">View Workflow Examples</button>
            </div>
            <div class="content-right">
                <div class="use-case-grid">
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-target"></use></svg></div>
                        <h3 class="use-case-title">Smart Call Analysis</h3>
                        <p class="use-case-desc">Listen to calls, identify struggling reps, and automatically schedule personalized training simulations.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-doc"></use></svg></div>
                        <h3 class="use-case-title">Email Intelligence</h3>
                        <p class="use-case-desc">Detect urgent RFPs, auto-draft responses, and alert the right team members instantly.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-chart"></use></svg></div>
                        <h3 class="use-case-title">Deal Acceleration</h3>
                        <p class="use-case-desc">Monitor deal velocity, identify stalled opportunities, and trigger intervention workflows.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-gear"></use></svg></div>
                        <h3 class="use-case-title">Continuous Improvement</h3>
                        <p class="use-case-desc">Learn from successful outcomes and automatically update all agent behaviors.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scene 4: Continuous Learning -->
    <div class="content-overlay" id="content-overlay-4">
        <div class="close-overlay" onclick="closeContentOverlay(4)"></div>
        <div class="content-container">
            <div class="content-left">
                <span class="content-badge">Feedback Loops</span>
                <h2 class="content-title">Intelligence That Improves Every Day</h2>
                <p class="content-subtitle">Every interaction makes Tribble smarter. From successful RFPs to resolved tickets, your organization's collective intelligence compounds with every action.</p>
                <div class="content-stats">
                    <div class="stat-item">
                        <div class="stat-value">125K+</div>
                        <div class="stat-label">Learning Interactions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">Daily</div>
                        <div class="stat-label">Model Updates</div>
                    </div>
                </div>
                <button class="content-cta">See Learning in Action</button>
            </div>
            <div class="content-right">
                <div class="use-case-grid">
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-doc"></use></svg></div>
                        <h3 class="use-case-title">Success Pattern Recognition</h3>
                        <p class="use-case-desc">Identify what makes deals close faster and replicate winning strategies automatically.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-doc"></use></svg></div>
                        <h3 class="use-case-title">Knowledge Gap Detection</h3>
                        <p class="use-case-desc">Proactively identify missing documentation and generate it before teams need it.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-hex"></use></svg></div>
                        <h3 class="use-case-title">Predictive Intelligence</h3>
                        <p class="use-case-desc">Anticipate customer questions and prepare responses before they're asked.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-bolt"></use></svg></div>
                        <h3 class="use-case-title">Performance Optimization</h3>
                        <p class="use-case-desc">Continuously refine workflows based on actual outcomes and team feedback.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scene 5: Sales Transformation -->
    <div class="content-overlay" id="content-overlay-5">
        <div class="close-overlay" onclick="closeContentOverlay(5)"></div>
        <div class="content-container">
            <div class="content-left">
                <span class="content-badge">Sales Excellence</span>
                <h2 class="content-title">Every Rep Sells Like Your Best Rep</h2>
                <p class="content-subtitle">Transform your entire sales organization by capturing and scaling the expertise of your top performers. Tribble ensures every interaction benefits from your collective sales intelligence.</p>
                <div class="content-stats">
                    <div class="stat-item">
                        <div class="stat-value">800 hrs</div>
                        <div class="stat-label">Saved Monthly on RFPs</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">90%</div>
                        <div class="stat-label">Faster Response Time</div>
                    </div>
                </div>
                <button class="content-cta">Transform Your Sales Team</button>
            </div>
            <div class="content-right">
                <div class="use-case-grid">
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-doc"></use></svg></div>
                        <h3 class="use-case-title">RFP Automation</h3>
                        <p class="use-case-desc">Complete complex RFPs in minutes, not days. Pull from past wins, product docs, and expert knowledge automatically.</p>
                        <div class="use-case-metric">2 hours → 10 minutes</div>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-target"></use></svg></div>
                        <h3 class="use-case-title">Discovery Intelligence</h3>
                        <p class="use-case-desc">Analyze calls to identify reps struggling with discovery. Auto-schedule personalized training with real deal simulations.</p>
                        <div class="use-case-metric">35% better qualification</div>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-bolt"></use></svg></div>
                        <h3 class="use-case-title">Deal Acceleration</h3>
                        <p class="use-case-desc">Monitor all deals in real-time. Identify blockers, suggest next best actions, and pull in resources automatically.</p>
                        <div class="use-case-metric">23% faster deal velocity</div>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-hex"></use></svg></div>
                        <h3 class="use-case-title">Competitive Intelligence</h3>
                        <p class="use-case-desc">Instantly access battlecards, win/loss analysis, and competitive positioning for any deal scenario.</p>
                        <div class="use-case-metric">42% higher win rate</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scene 6: Intelligence Metrics -->
    <div class="content-overlay" id="content-overlay-6">
        <div class="close-overlay" onclick="closeContentOverlay(6)"></div>
        <div class="content-container">
            <div class="content-left">
                <span class="content-badge">Tribblytics</span>
                <h2 class="content-title">Measure What Matters</h2>
                <p class="content-subtitle">Get unprecedented visibility into how your digital workforce performs. Tribblytics shows you exactly how AI agents impact your business metrics.</p>
                <div class="content-stats">
                    <div class="stat-item">
                        <div class="stat-value">Real-time</div>
                        <div class="stat-label">Performance Tracking</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">100%</div>
                        <div class="stat-label">Audit Trail</div>
                    </div>
                </div>
                <button class="content-cta">Explore Analytics</button>
            </div>
            <div class="content-right">
                <div class="use-case-grid">
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-chart"></use></svg></div>
                        <h3 class="use-case-title">Agent Performance</h3>
                        <p class="use-case-desc">Track response accuracy, completion times, and satisfaction scores for every agent interaction.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-chart"></use></svg></div>
                        <h3 class="use-case-title">ROI Dashboard</h3>
                        <p class="use-case-desc">Measure time saved, deals accelerated, and revenue impact in real-time.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-target"></use></svg></div>
                        <h3 class="use-case-title">Knowledge Utilization</h3>
                        <p class="use-case-desc">See which knowledge sources drive the best outcomes and identify gaps.</p>
                    </div>
                    <div class="use-case-card">
                        <div class="use-case-icon"><svg aria-hidden="true" viewBox="0 0 100 100"><use href="#icon-gear"></use></svg></div>
                        <h3 class="use-case-title">Workflow Optimization</h3>
                        <p class="use-case-desc">Identify bottlenecks and optimization opportunities across all automated workflows.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';
        
        // Scene setup
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf8fafc);
        
        // Camera
        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 4000);
        camera.position.set(0, 1000, 2000);
        
        // Renderer
        const renderer = new THREE.WebGLRenderer({ 
            antialias: true, 
            alpha: true,
            powerPreference: 'high-performance'
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        document.getElementById('canvas-container').appendChild(renderer.domElement);
        
        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 1.2);
        scene.add(ambientLight);
        
        const directionalLight = new THREE.DirectionalLight(0x3263E9, 0.8);
        directionalLight.position.set(100, 200, 100);
        scene.add(directionalLight);
        
        const rimLight = new THREE.DirectionalLight(0x5B7FEA, 0.4);
        rimLight.position.set(-100, 100, -100);
        scene.add(rimLight);
        
        // Model loader
        const gltfLoader = new GLTFLoader();
        
        // Set up Draco loader for compressed geometry
        const dracoLoader = new DRACOLoader();
        dracoLoader.setDecoderPath('https://cdn.jsdelivr.net/npm/three@0.157.0/examples/jsm/libs/draco/');
        dracoLoader.setDecoderConfig({ type: 'js' });
        gltfLoader.setDRACOLoader(dracoLoader);
        
        // Component storage
        let mainFactory = null;
        
        // Enhanced wireframe conversion with adjustable opacity
        function convertToWireframe(object, color = 0x3263E9, lineOpacity = 1.0) {
            object.traverse((child) => {
                if (child.isMesh) {
                    const wireframeGeometry = new THREE.WireframeGeometry(child.geometry);
                    const wireframeMaterial = new THREE.LineBasicMaterial({ 
                        color: color,
                        linewidth: 2,
                        transparent: true,
                        opacity: lineOpacity
                    });
                    const wireframe = new THREE.LineSegments(wireframeGeometry, wireframeMaterial);
                    child.add(wireframe);
                    child.userData.wireframe = wireframe;
                    child.userData.wireframeMaterial = wireframeMaterial;
                    
                    child.material = new THREE.MeshBasicMaterial({ 
                        color: 0xf0f9ff,
                        transparent: true,
                        opacity: 0.02,
                        side: THREE.DoubleSide
                    });
                }
            });
        }
        
        // Scene configurations - journey from far to inside
        const scenes = [
            {
                name: 'TRIBBLE: YOUR ORCHESTRATED AGENT',
                subtitle: 'One agent that learns your business and runs it',
                camera: { x: 0, y: 900, z: 1900 },
                target: { x: 0, y: 0, z: 0 },
                rotation: { x: 0, y: 0, z: 0 },
                hudElements: ['velocity-display', 'tracking-brackets']
            },
            {
                name: 'CAPTURE + CONNECT',
                subtitle: 'Unified memory graph across systems, docs, and conversations',
                camera: { x: 450, y: 520, z: 900 },
                target: { x: 0, y: 0, z: 0 },
                rotation: { x: 0, y: 0.18, z: 0 },
                hudElements: ['velocity-display', 'readout1', 'connection-lines', 'radar']
            },
            {
                name: 'THINK + ORCHESTRATE',
                subtitle: 'Specialized agents collaborating to complete workflows',
                camera: { x: -280, y: 360, z: 460 },
                target: { x: 0, y: 20, z: 0 },
                rotation: { x: 0, y: -0.28, z: 0 },
                hudElements: ['readout1', 'readout2', 'reticle', 'particle-field']
            },
            {
                name: 'ACT WITHOUT ASKING',
                subtitle: 'Event-driven intelligence that triggers and resolves work',
                camera: { x: 220, y: 240, z: 280 },
                target: { x: 0, y: 30, z: 0 },
                rotation: { x: 0, y: 0.48, z: 0 },
                hudElements: ['analysis-panel', 'reticle', 'crosshair']
            },
            {
                name: 'REAL IMPACT BY FUNCTION',
                subtitle: 'Sales, CS, Ops, Product, and Marketing in action',
                camera: { x: -260, y: 180, z: 0 },
                target: { x: 0, y: 40, z: 0 },
                rotation: { x: 0, y: 1.7, z: 0 },
                hudElements: ['readout3', 'connection-lines', 'waveform']
            },
            {
                name: 'TRIBBLYTICS',
                subtitle: 'Audit trails, performance telemetry, and ROI in real time',
                camera: { x: 180, y: 240, z: -180 },
                target: { x: 0, y: 45, z: 0 },
                rotation: { x: 0.08, y: 2.3, z: 0 },
                hudElements: ['readout1', 'readout2', 'reticle', 'point3']
            },
            {
                name: 'ACTIVATE TRIBBLE',
                subtitle: 'See it run a workflow for your team this week',
                camera: { x: 280, y: 280, z: 280 },
                target: { x: 0, y: 50, z: 0 },
                rotation: { x: 0, y: 4.3, z: 0 },
                hudElements: ['analysis-panel', 'readout1', 'readout2', 'readout3']
            }
        ];
        
        let currentScene = 0;
        let sceneStableTimer = null;
        let lastSceneChange = Date.now();
        
        // Load main factory model
        async function loadModels() {
            try {
                console.log('Loading industrial_machine.glb...');
                const gltf = await gltfLoader.loadAsync('./models/optimized/mega_factory.glb');
                console.log('Industrial machine loaded successfully', gltf);
                mainFactory = gltf.scene;
                
                // Calculate bounding box to understand the model size
                const box = new THREE.Box3().setFromObject(mainFactory);
                const size = box.getSize(new THREE.Vector3());
                console.log('Industrial machine size:', size);
                console.log('Industrial machine center:', box.getCenter(new THREE.Vector3()));
                
                // Set scale for mega_factory
                mainFactory.scale.set(2, 2, 2);  // Original scale for mega_factory
                
                // Start with lower opacity for better text readability
                convertToWireframe(mainFactory, 0x3263E9, 0.3);
                scene.add(mainFactory);
                
                // Add microchip grid in the center
                try {
                    const chipGltf = await gltfLoader.loadAsync('./models/optimized/microchip_prototype.glb');
                    
                    // Create a 3D grid of chips
                    const chipGrid = new THREE.Group();
                    const connectionGroup = new THREE.Group();
                    const rows = 3;
                    const cols = 3;
                    const layers = 3;
                    const spacing = 40;
                    
                    const chipPositions = [];
                    
                    for (let layer = 0; layer < layers; layer++) {
                        for (let row = 0; row < rows; row++) {
                            for (let col = 0; col < cols; col++) {
                                const chip = chipGltf.scene.clone();
                                chip.scale.set(10, 10, 10);
                                
                                // Convert to wireframe with Tribble blue color
                                convertToWireframe(chip, 0x3263E9, 0.8);
                                
                                // Position in 3D grid with more spacing
                                const x = (col - cols / 2 + 0.5) * spacing;
                                const z = (row - rows / 2 + 0.5) * spacing;
                                const y = 40 + (layer * spacing);
                                
                                chip.position.set(x, y, z);
                                chipPositions.push({x, y, z});
                                
                                // Add slight rotation for visual interest
                                chip.rotation.y = Math.PI / 4;
                                
                                chipGrid.add(chip);
                            }
                        }
                    }
                    
                    // Create neural network connections
                    const connectionMaterial = new THREE.LineBasicMaterial({
                        color: 0x3263E9,
                        transparent: true,
                        opacity: 0.3,
                        linewidth: 1
                    });
                    
                    // Connect adjacent chips
                    for (let i = 0; i < chipPositions.length; i++) {
                        for (let j = i + 1; j < chipPositions.length; j++) {
                            const dist = Math.sqrt(
                                Math.pow(chipPositions[i].x - chipPositions[j].x, 2) +
                                Math.pow(chipPositions[i].y - chipPositions[j].y, 2) +
                                Math.pow(chipPositions[i].z - chipPositions[j].z, 2)
                            );
                            
                            // Connect nearby chips
                            if (dist < spacing * 1.5) {
                                const geometry = new THREE.BufferGeometry().setFromPoints([
                                    new THREE.Vector3(chipPositions[i].x, chipPositions[i].y, chipPositions[i].z),
                                    new THREE.Vector3(chipPositions[j].x, chipPositions[j].y, chipPositions[j].z)
                                ]);
                                const line = new THREE.Line(geometry, connectionMaterial);
                                connectionGroup.add(line);
                            }
                        }
                    }
                    
                    chipGrid.add(connectionGroup);
                    
                    // Add rotation animation to the entire chip grid
                    chipGrid.userData.rotationSpeed = 0.001;
                    chipGrid.userData.connectionGroup = connectionGroup;
                    mainFactory.add(chipGrid);
                    mainFactory.userData.chipGrid = chipGrid;
                    
                } catch (e) {
                    console.error('ERROR: Microchip grid failed to load:', e);
                    console.error('Check if file exists at: ./models/optimized/microchip_prototype.glb');
                }
                
            } catch (error) {
                console.error('ERROR: Main factory failed to load:', error);
                console.log('Creating fallback factory');
                
                // Create complex fallback factory
                const factoryGroup = new THREE.Group();
                
                // Main building
                const mainGeometry = new THREE.BoxGeometry(100, 50, 120);
                const mainMesh = new THREE.Mesh(mainGeometry);
                // Start with lower opacity for better text readability
                convertToWireframe(mainMesh, 0x1e40af, 0.3);
                factoryGroup.add(mainMesh);
                
                // Central dome
                const domeGeometry = new THREE.SphereGeometry(30, 16, 12, 0, Math.PI * 2, 0, Math.PI / 2);
                const domeMesh = new THREE.Mesh(domeGeometry);
                convertToWireframe(domeMesh, 0x5B7FEA, 0.3);
                domeMesh.position.y = 25;
                factoryGroup.add(domeMesh);
                
                // Towers
                for (let i = 0; i < 4; i++) {
                    const towerGeometry = new THREE.CylinderGeometry(8, 10, 80, 8);
                    const towerMesh = new THREE.Mesh(towerGeometry);
                    convertToWireframe(towerMesh, 0x3263E9, 0.3);
                    const angle = (i / 4) * Math.PI * 2;
                    towerMesh.position.x = Math.cos(angle) * 60;
                    towerMesh.position.z = Math.sin(angle) * 60;
                    towerMesh.position.y = 40;
                    factoryGroup.add(towerMesh);
                }
                
                // Production wings
                for (let side = -1; side <= 1; side += 2) {
                    const wingGeometry = new THREE.BoxGeometry(50, 30, 80);
                    const wingMesh = new THREE.Mesh(wingGeometry);
                    convertToWireframe(wingMesh, 0x3263E9, 0.3);
                    wingMesh.position.x = side * 75;
                    wingMesh.position.y = 15;
                    factoryGroup.add(wingMesh);
                    
                    // Connectors
                    const connectorGeometry = new THREE.BoxGeometry(25, 15, 20);
                    const connectorMesh = new THREE.Mesh(connectorGeometry);
                    convertToWireframe(connectorMesh, 0x5B7FEA, 0.3);
                    connectorMesh.position.x = side * 50;
                    connectorMesh.position.y = 7.5;
                    factoryGroup.add(connectorMesh);
                }
                
                // Details
                for (let i = 0; i < 8; i++) {
                    const detailGeometry = new THREE.BoxGeometry(10, 25, 10);
                    const detailMesh = new THREE.Mesh(detailGeometry);
                    convertToWireframe(detailMesh, 0x7B9FEE, 0.3);
                    const angle = (i / 8) * Math.PI * 2;
                    detailMesh.position.x = Math.cos(angle) * 40;
                    detailMesh.position.z = Math.sin(angle) * 40;
                    detailMesh.position.y = 12.5;
                    factoryGroup.add(detailMesh);
                }
                
                mainFactory = factoryGroup;
                scene.add(mainFactory);
            }
        }
        
        // Initialize HUD animations
        function initHUD() {
            // Animate corners
            anime({
                targets: '.hud-corner',
                opacity: [0, 0.8],
                scale: [0.8, 1],
                duration: 1000,
                delay: anime.stagger(100),
                easing: 'easeOutQuad'
            });
            
            // Scanning lines animation
            anime({
                targets: '.scan-line',
                opacity: [0, 0.6, 0],
                translateY: [-50, 50],
                duration: 3000,
                delay: anime.stagger(500),
                loop: true,
                easing: 'linear'
            });
            
            // Scene info fade in
            anime({
                targets: '#scene-info',
                opacity: [0, 1],
                translateX: [-20, 0],
                duration: 800,
                delay: 500,
                easing: 'easeOutQuad'
            });
            
            // Animated counters
            animateCounter('cores-value', 0, 127, 2000);
            animateCounter('density-value', 0, 98.7, 2500, true, '%');
            animateCounter('production-value', 0, 47, 3000);
            
            // Reticle animation
            anime({
                targets: '#reticle',
                rotate: 360,
                duration: 8000,
                loop: true,
                easing: 'linear'
            });
            
            // Data points floating
            anime({
                targets: '.data-point',
                translateY: [0, -20, 0],
                opacity: [0, 1, 0],
                duration: 3000,
                delay: anime.stagger(400),
                loop: true,
                easing: 'easeInOutSine'
            });
            
            // Connection lines animation
            anime({
                targets: '.connection-line',
                opacity: [0, 0.6, 0],
                scaleX: [0, 1, 0],
                duration: 2000,
                delay: anime.stagger(300),
                loop: true,
                easing: 'easeInOutQuad'
            });
            
            // Tracking brackets pulse
            anime({
                targets: '.tracking-brackets',
                scale: [1, 1.1, 1],
                opacity: [0.6, 1, 0.6],
                duration: 2000,
                loop: true,
                easing: 'easeInOutSine'
            });
            
            
            // Initialize waveform
            createWaveform();
            
            // Initialize particle field
            createParticleField();
            
            // Crosshair animation
            anime({
                targets: '.crosshair-line',
                opacity: [0, 0.8, 0],
                duration: 2000,
                delay: anime.stagger(100),
                loop: true,
                easing: 'easeInOutQuad'
            });
            
        }
        
        
        // Create waveform analyzer
        function createWaveform() {
            const waveformContainer = document.getElementById('waveform');
            
            for (let i = 0; i < 40; i++) {
                const bar = document.createElement('div');
                bar.className = 'wave-bar';
                bar.style.setProperty('--wave-height', `${20 + Math.random() * 80}%`);
                bar.style.animationDelay = `${i * 0.05}s`;
                waveformContainer.appendChild(bar);
            }
        }
        
        // Create particle field
        function createParticleField() {
            const particleContainer = document.getElementById('particle-field');
            
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.setProperty('--drift-x', `${(Math.random() - 0.5) * 200}px`);
                particle.style.setProperty('--drift-y', `${(Math.random() - 0.5) * 200}px`);
                particle.style.animationDelay = `${Math.random() * 15}s`;
                particle.style.opacity = Math.random() * 0.8;
                particleContainer.appendChild(particle);
            }
        }
        
        // Animate number counters
        function animateCounter(id, start, end, duration, isFloat = false, suffix = '') {
            const element = document.getElementById(id);
            const obj = { value: start };
            
            anime({
                targets: obj,
                value: end,
                duration: duration,
                easing: 'easeOutQuad',
                update: function() {
                    if (isFloat) {
                        element.textContent = obj.value.toFixed(2) + suffix;
                    } else {
                        element.textContent = Math.floor(obj.value) + suffix;
                    }
                }
            });
        }
        
        // Update HUD for scene changes
        function updateHUD(sceneIndex) {
            const scene = scenes[sceneIndex];
            
            // Update title
            document.getElementById('scene-title').textContent = scene.name;
            document.getElementById('scene-subtitle').textContent = scene.subtitle;
            
            // Hide all HUD elements
            const allElements = ['readout1', 'readout2', 'readout3', 'analysis-panel', 'reticle', 
                               'point1', 'point2', 'point3', 'point4', 'point5',
                               'velocity-display', 'connection-lines', 'tracking-brackets',
                               'radar', 'waveform', 'crosshair', 'particle-field'];
            allElements.forEach(id => {
                anime({
                    targets: `#${id}`,
                    opacity: 0,
                    duration: 300
                });
            });
            
            // Show scene-specific elements
            scene.hudElements.forEach((id, index) => {
                anime({
                    targets: `#${id}`,
                    opacity: 1,
                    duration: 500,
                    delay: index * 100,
                    easing: 'easeOutQuad'
                });
            });
            
            // Update progress bars
            if (scene.hudElements.includes('analysis-panel')) {
                anime({
                    targets: '#integrity-progress',
                    width: '85%',
                    duration: 1000,
                    delay: 300,
                    easing: 'easeOutQuad'
                });
                anime({
                    targets: '#efficiency-progress',
                    width: '92%',
                    duration: 1000,
                    delay: 400,
                    easing: 'easeOutQuad'
                });
                anime({
                    targets: '#sync-progress',
                    width: '78%',
                    duration: 1000,
                    delay: 500,
                    easing: 'easeOutQuad'
                });
                anime({
                    targets: '#thermal-progress',
                    width: '94%',
                    duration: 1000,
                    delay: 600,
                    easing: 'easeOutQuad'
                });
            }
            
            // Position reticle at focus points
            if (scene.hudElements.includes('reticle')) {
                const reticle = document.getElementById('reticle');
                const positions = [
                    { x: '50%', y: '40%' },
                    { x: '60%', y: '45%' },
                    { x: '40%', y: '55%' },
                    { x: '55%', y: '50%' },
                    { x: '45%', y: '35%' }
                ];
                const pos = positions[sceneIndex % positions.length];
                
                anime({
                    targets: reticle,
                    left: pos.x,
                    top: pos.y,
                    duration: 800,
                    easing: 'easeInOutQuad'
                });
            }
            
            
            // Update velocity
            if (scene.hudElements.includes('velocity-display')) {
                const velocity = 2.5 + (sceneIndex * 0.3);
                animateCounter('velocity-value', velocity - 0.5, velocity, 800, true);
            }
            
        }
        
        // Smooth scroll system
        let targetScrollY = 0;
        let currentScrollY = 0;
        let scrollVelocity = 0;
        
        function handleScroll() {
            targetScrollY = window.scrollY;
            
            // Hero content visibility is now handled in scene change logic
            
            // Show features strip in middle of journey
            if (targetScrollY > window.innerHeight * 2 && targetScrollY < window.innerHeight * 8) {
                document.getElementById('features-strip').classList.add('visible');
            } else {
                document.getElementById('features-strip').classList.remove('visible');
            }
        }
        
        // Adjust wireframe opacity based on scene
        function adjustWireframeOpacity(targetOpacity) {
            if (mainFactory) {
                mainFactory.traverse((child) => {
                    if (child.userData.wireframeMaterial) {
                        anime({
                            targets: child.userData.wireframeMaterial,
                            opacity: targetOpacity,
                            duration: 800,
                            easing: 'easeInOutQuad'
                        });
                    }
                });
            }
        }
        
        function updateCamera() {
            // Smooth scroll interpolation
            const scrollDelta = targetScrollY - currentScrollY;
            scrollVelocity += scrollDelta * 0.015;
            scrollVelocity *= 0.88;
            currentScrollY += scrollVelocity;
            
            const maxScroll = document.body.scrollHeight - window.innerHeight;
            const scrollProgress = Math.max(0, Math.min(1, currentScrollY / maxScroll));
            
            const sceneFloat = scrollProgress * (scenes.length - 1);
            const sceneIndex = Math.floor(sceneFloat);
            const sceneProgress = sceneFloat - sceneIndex;
            
            // Update scene if changed
            if (sceneIndex !== currentScene) {
                const previousScene = currentScene;
                currentScene = sceneIndex;
                lastSceneChange = Date.now();
                updateHUD(currentScene);
                
                // Hide any open overlays when changing scenes
                hideAllOverlays();
                
                // Adjust wireframe opacity and show/hide hero content
                if (currentScene === 0) {
                    adjustWireframeOpacity(0.3);
                    // Show hero content on scene 0
                    document.getElementById('hero-top').classList.remove('hidden');
                    document.getElementById('hero-buttons').classList.remove('hidden');
                    document.getElementById('scroll-prompt').classList.remove('hidden');
                } else {
                    if (currentScene === 1) {
                        adjustWireframeOpacity(0.5);
                    } else {
                        adjustWireframeOpacity(0.8);
                    }
                    // Hide hero content on other scenes
                    document.getElementById('hero-top').classList.add('hidden');
                    document.getElementById('hero-buttons').classList.add('hidden');
                    document.getElementById('scroll-prompt').classList.add('hidden');
                }
                
                // Clear any existing timer
                if (sceneStableTimer) {
                    clearTimeout(sceneStableTimer);
                }
                
                // Auto-show overlay after user settles at this zoom level (not on scene 0)
                if (currentScene > 0) {
                    console.log('Scene changed to:', currentScene, 'Will auto-show overlay in 1.2s');
                    sceneStableTimer = setTimeout(() => {
                        // Only show overlay if we're still at the same scene and it hasn't been shown
                        if (currentScene === sceneIndex && !contentShown[sceneIndex]) {
                            console.log('Auto-showing overlay for scene:', currentScene);
                            showContentOverlay(currentScene);
                        } else {
                            console.log('Not showing overlay. Current:', currentScene, 'Index:', sceneIndex, 'Shown:', contentShown[sceneIndex]);
                        }
                    }, 1200); // Wait 1.2 seconds for user to settle
                }
            }
            
            const scene1 = scenes[Math.min(sceneIndex, scenes.length - 1)];
            const scene2 = scenes[Math.min(sceneIndex + 1, scenes.length - 1)];
            
            // Smooth easing
            const easedProgress = sceneProgress < 0.5 
                ? 2 * sceneProgress * sceneProgress 
                : 1 - Math.pow(-2 * sceneProgress + 2, 2) / 2;
            
            // Interpolate camera position
            const targetCameraX = scene1.camera.x + (scene2.camera.x - scene1.camera.x) * easedProgress;
            const targetCameraY = scene1.camera.y + (scene2.camera.y - scene1.camera.y) * easedProgress;
            const targetCameraZ = scene1.camera.z + (scene2.camera.z - scene1.camera.z) * easedProgress;
            
            camera.position.x += (targetCameraX - camera.position.x) * 0.08;
            camera.position.y += (targetCameraY - camera.position.y) * 0.08;
            camera.position.z += (targetCameraZ - camera.position.z) * 0.08;
            
            // Interpolate look-at target
            const targetLookX = scene1.target.x + (scene2.target.x - scene1.target.x) * easedProgress;
            const targetLookY = scene1.target.y + (scene2.target.y - scene1.target.y) * easedProgress;
            const targetLookZ = scene1.target.z + (scene2.target.z - scene1.target.z) * easedProgress;
            
            camera.lookAt(targetLookX, targetLookY, targetLookZ);
            
            // Update model rotation
            if (mainFactory) {
                const targetRotX = scene1.rotation.x + (scene2.rotation.x - scene1.rotation.x) * easedProgress;
                const targetRotY = scene1.rotation.y + (scene2.rotation.y - scene1.rotation.y) * easedProgress;
                const targetRotZ = scene1.rotation.z + (scene2.rotation.z - scene1.rotation.z) * easedProgress;
                
                mainFactory.rotation.x += (targetRotX - mainFactory.rotation.x) * 0.05;
                mainFactory.rotation.y += (targetRotY - mainFactory.rotation.y) * 0.05;
                mainFactory.rotation.z += (targetRotZ - mainFactory.rotation.z) * 0.05;
            }
        }
        
        // Animation loop
        const clock = new THREE.Clock();
        
        function animate() {
            requestAnimationFrame(animate);
            
            const elapsedTime = clock.getElapsedTime();
            
            updateCamera();
            
            // Subtle idle animation
            if (mainFactory) {
                mainFactory.position.y = Math.sin(elapsedTime * 0.5) * 2;
                
                // Rotate the chip grid
                if (mainFactory.userData.chipGrid) {
                    mainFactory.userData.chipGrid.rotation.y += mainFactory.userData.chipGrid.userData.rotationSpeed;
                    
                    // Add floating animation to chips
                    mainFactory.userData.chipGrid.children.forEach((child, index) => {
                        if (child.isMesh || child.type === 'Group') {
                            const offset = index * 0.1;
                            child.position.y = child.userData.baseY || child.position.y;
                            if (!child.userData.baseY) child.userData.baseY = child.position.y;
                            child.position.y = child.userData.baseY + Math.sin(elapsedTime * 0.8 + offset) * 1.5;
                        }
                    });
                    
                    // Pulse neural connections
                    const connectionGroup = mainFactory.userData.chipGrid.userData.connectionGroup;
                    if (connectionGroup) {
                        connectionGroup.children.forEach((line, index) => {
                            if (line.material) {
                                const pulse = 0.3 + Math.sin(elapsedTime * 2 + index * 0.2) * 0.3;
                                line.material.opacity = pulse;
                            }
                        });
                    }
                }
            }
            
            // Animate tracking brackets position
            const brackets = document.getElementById('tracking-brackets');
            if (brackets && currentScene < 3) {
                const offsetX = Math.sin(elapsedTime) * 20;
                const offsetY = Math.cos(elapsedTime * 0.8) * 15;
                brackets.style.transform = `translate(calc(-50% + ${offsetX}px), calc(-50% + ${offsetY}px))`;
            }
            
            // Animate radar dots
            const radarDots = document.querySelectorAll('.radar-dot');
            radarDots.forEach((dot, index) => {
                const angle = elapsedTime + index * Math.PI / 3;
                const radius = 40 + Math.sin(elapsedTime * 2 + index) * 10;
                dot.style.left = `${50 + Math.cos(angle) * radius}%`;
                dot.style.top = `${50 + Math.sin(angle) * radius}%`;
            });
            
            // Update crosshair rotation
            const crosshair = document.getElementById('crosshair');
            if (crosshair.style.opacity > 0) {
                crosshair.style.transform = `translate(-50%, -50%) rotate(${elapsedTime * 10}deg)`;
            }
            
            renderer.render(scene, camera);
        }
        
        // Event listeners
        window.addEventListener('scroll', handleScroll);
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        // Initialize
        async function init() {
            await loadModels();
            
            // Hide loading screen
            const loadingScreen = document.getElementById('loading-screen');
            anime({
                targets: loadingScreen,
                opacity: 0,
                duration: 500,
                easing: 'easeOutQuad',
                complete: () => {
                    loadingScreen.style.display = 'none';
                }
            });
            
            initHUD();
            updateHUD(0);
            animate();
            
            // Scene 0 shows hero content, not overlay
        }
        
        // Content overlay management
        let contentShown = new Array(scenes.length).fill(false);
        let currentOverlay = -1;
        
        function hideAllOverlays() {
            for (let i = 0; i < scenes.length; i++) {
                const overlay = document.getElementById(`content-overlay-${i}`);
                if (overlay) {
                    overlay.classList.remove('active');
                }
            }
            currentOverlay = -1;
            contentShown.fill(false); // Reset all shown states
            hideViewDetailsButton();
        }
        
        function showContentOverlay(sceneIndex) {
            console.log('showContentOverlay called for scene:', sceneIndex, 'Current scene:', currentScene);
            // Don't show if it's not the current scene
            if (sceneIndex !== currentScene) {
                console.log('Not showing overlay - scene mismatch');
                return;
            }
            
            // Hide all overlays first
            hideAllOverlays();
            
            // Show the specific overlay after a short delay
            setTimeout(() => {
                const overlay = document.getElementById(`content-overlay-${sceneIndex}`);
                console.log('Looking for overlay:', `content-overlay-${sceneIndex}`, 'Found:', !!overlay);
                if (overlay) {
                    overlay.classList.add('active');
                    contentShown[sceneIndex] = true;
                    currentOverlay = sceneIndex;
                    hideViewDetailsButton();
                    console.log('Overlay shown for scene:', sceneIndex);
                } else {
                    console.error('Overlay not found for scene:', sceneIndex);
                }
            }, 300);
        }
        
        window.closeContentOverlay = function(index) {
            const overlay = document.getElementById(`content-overlay-${index}`);
            if (overlay) {
                overlay.classList.remove('active');
                currentOverlay = -1;
                // Don't reset contentShown so it doesn't auto-show again
                // contentShown[index] = false;
                // Show the view details button again after a delay
                setTimeout(() => {
                    showViewDetailsButton();
                }, 500);
            }
        }
        
        window.showCurrentOverlay = function() {
            if (currentScene >= 0 && currentScene < scenes.length) {
                showContentOverlay(currentScene);
                hideViewDetailsButton();
            }
        }
        
        function showViewDetailsButton() {
            const btn = document.getElementById('view-details-btn');
            if (btn && currentScene > 0) { // Don't show on first scene
                // Update button text to be more descriptive
                btn.innerHTML = `Explore ${scenes[currentScene].name} →`;
                setTimeout(() => {
                    btn.classList.add('visible');
                }, 500);
            }
        }
        
        function hideViewDetailsButton() {
            const btn = document.getElementById('view-details-btn');
            if (btn) {
                btn.classList.remove('visible');
            }
        }
        
        init();
    </script>

</body>
</html>